jenkins:
  build: docker/jenkins
  links:
  - artifactory
  - sonar
  - sonarmysql
  - worblehatweb
  - worblehatdb
  - apachehttpd
  environment:
  - JENKINS_URL=http://jenkins:8080
  - ARTIFACTORY_URL=http://artifactory:8080/artifactory
  - APACHE_URL=http://apachehttpd:80
  - WORBLEHAT_DB_HOST=worblehatdb
  - WORBLEHAT_TOMCAT_URL=http://worblehatweb:8080
  - SONAR_URL=http://sonar:9000
  - SONAR_DB_HOST=sonarmysql
  ports:
  - "8080:8080"
artifactory:
  image: mattgruter/artifactory
  ports:
  - "8081:8080"
sonarmysql:
  image: tpires/sonar-mysql
  expose:
  - 3306
sonar:
  build: docker/sonar
  links:
  - sonarmysql:db
  ports:
  - "9000:9000"
worblehatdb:
  image: mysql
  environment:
  - MYSQL_ROOT_PASSWORD=root
  - MYSQL_USER=worblehat
  - MYSQL_PASSWORD=worblehat
  - MYSQL_DATABASE=worblehat
worblehatweb:
  build: docker/tomcat
  links:
  - worblehatdb
apachehttpd:
  build: docker/apache-httpd
  ports:
  - "8000:80"
