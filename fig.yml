jenkins:
  build: docker/jenkins
  links:
  - worblehat_tomcat
  - artifactory
  - sonar
  - sonarmysql
  - worblehat_db
  - apachehttpd
  environment:
  - JENKINS_URL=http://jenkins:8080
  - ARTIFACTORY_URL=http://artifactory:8080/artifactory
  - APACHE_URL=http://apachehttpd:80
  - WORBLEHAT_DB_HOST=worblehat_db
  - WORBLEHAT_TOMCAT_URL=http://worblehat_tomcat:8080
  ports:
  - "8080:8080"
artifactory:
  image: mattgruter/artifactory
  ports:
  - "8081:8080"
sonarmysql:
  image: tpires/sonar-mysql
  expose:
  - 3306
sonar:
  build: docker/sonar
  links:
  - sonarmysql:db
worblehat_db:
  image: mysql
  environment:
  - MYSQL_ROOT_PASSWORD=root
  - MYSQL_USER=worblehat
  - MYSQL_PASSWORD=worblehat
  - MYSQL_DATABASE=worblehat
worblehat_tomcat:
  build: docker/tomcat
  links:
  - mysql
apachehttpd:
  build: docker/apache-httpd
